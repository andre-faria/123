<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title> Ju's Valentine Quiz üíê</title>

<style>
  body {
    margin: 0;
    height: 100vh;
    font-family: "Segoe UI", sans-serif;

    /* üå∑ Tulips field background */
    background-image: url("https://images.unsplash.com/photo-1557929036-44a5d490d527?auto=format&fit=crop&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&ixlib=rb-4.1.0&q=80&w=3024");
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;

    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }

  /* Fun title above the quiz box */
  .quiz-title {
    text-align: center;
    margin-bottom: 20px;
  }
  .quiz-title h1 {
    font-size: 42px;
    color: #ff4d6d;
    text-shadow: 2px 2px 4px #fff;
    margin: 0;
  }
  .quiz-title p {
    font-size: 18px;
    color: #fff;
    text-shadow: 1px 1px 2px #000;
    margin: 5px 0 0 0;
  }

  /* Quiz card */
  .card {
    background: rgba(255, 255, 255, 0.97);
    width: 92%;
    max-width: 780px;
    min-height: 560px;
    padding: 48px 40px;
    border-radius: 28px;
    text-align: center;
    box-shadow: 0 24px 48px rgba(0,0,0,0.3);
    display: flex;
    flex-direction: column;
    justify-content: center;
    position: relative; /* allow absolute children if needed */
    overflow: hidden;   /* keep runaway children inside */
  }

  h2 { margin-top: 0; font-size: 28px; }
  h3 { font-size: 22px; margin-top: 24px; }
  .counter { font-weight: bold; font-size: 18px; margin-bottom: 18px; }
  .feedback { font-size: 20px; margin: 18px 0; min-height: 24px; }

  /* SMALLER buttons across the board */
  button {
    margin: 10px;
    padding: 10px 18px;    /* smaller */
    border-radius: 24px;   /* smaller */
    border: none;
    font-size: 16px;       /* smaller */
    cursor: pointer;
    background: #ff4d6d;
    color: white;
    transition: background 0.2s;
  }
  /* No scale on hover to keep hitbox tight */
  button:hover { background: #ff1e4d; }

  /* Decision area so No can run inside */
  .decision-wrap {
    position: relative;
    height: 120px; /* room for dodging */
    margin-top: 14px;
  }

  /* Yes is normal small */
  #yesBtn { position: relative; z-index: 1; }

  /* SUPER small, agile No button */
  #noBtn {
    position: absolute;
    left: 50%; top: 50%;
    transform: translate(-50%, -50%);
    padding: 6px 10px;     /* extra small */
    font-size: 13px;       /* extra small */
    min-width: 64px;       /* not too wide */
    height: 30px;          /* low height */
    z-index: 2;
    /* no transform scaling on hover at all */
  }
  #noBtn:hover { background: #ff1e4d; }

  canvas { position: fixed; inset: 0; pointer-events: none; }
</style>
</head>

<body>
  <!-- Fun Title -->
  <div class="quiz-title">
    <h1>üíò O quiz mais importante da sua vida menina Juliana! üíê</h1>
    <p>Ser√° que consegues? Let's find out!</p>
  </div>

  <!-- Quiz Card -->
  <div class="card" id="app"></div>
  <canvas id="confetti"></canvas>

<script>
const questions = [
  { q: "Qual foi o tema do Escape Room do nosso primeiro date?", a: ["Orfanato", "Alice", "Escobar", "Pris√£o"], c: 0 },
  { q: "Restaurante onde jantamos no nosso primeiro Valentine's?", a: ["Flow", "Portarossa", "Mistu", "H3"], c: 2 },
  { q: "Concerto que fomos ver no dia seguinte ao nosso primeiro anivers√°rio?", a: ["Kendrick & SZA", "The Weekend", "Posty", "Taylor"], c: 2 },
  { q: "Quem √© a coisinha mais linda e fofa?", a: ["Eu", "Tu", "N√≥s", "Obviamente tu"], c: 3 }
];

let index = 0, correct = 0, wrong = 0;
const app = document.getElementById("app");

function renderQuestion(feedback = "") {
  const q = questions[index];
  app.innerHTML = `
    <div class="counter">${correct}/${questions.length} correct</div>
    <h2>${q.q}</h2>
    ${q.a.map((ans,i)=>`<button onclick="answer(${i})">${ans}</button>`).join("")}
    <div class="feedback">${feedback}</div>
  `;
}

function answer(i) {
  const isCorrect = i === questions[index].c;
  if (isCorrect) correct++; else wrong++;
  renderQuestion(isCorrect ? "‚úÖ Correct!" : "‚ùå FOCA-TE MENINA! üò§");
  setTimeout(() => {
    if (wrong >= 2) failScreen();
    else { index++; if (index < questions.length) renderQuestion(); else resultScreen(); }
  }, 900);
}

function failScreen() {
  app.innerHTML = `
    <h2>üòî Oopsiee...</h2>
    <p>Acabaste de perder um monte de beijos üíãüíãüíã</p>
    <p>Tente novamente menina...</p>
    <button onclick="restart()">Come√ßar de novo</button>
  `;
}

function restart() { index = 0; correct = 0; wrong = 0; renderQuestion(); }

function resultScreen() {
  if (correct >= 3){
    app.innerHTML = `
      <h2>üéâ HIHIHIHIH GANHOU!!!!!</h2>
      <p>${correct}/4 correct üíñ</p>
      <h3>Will you be my Valentine?</h3>

      <div class="decision-wrap" id="decisionWrap">
        <button id="yesBtn" onclick="yes()">Yes üíò</button>
        <button id="noBtn" type="button">No üíî</button>
      </div>
    `;

    const wrap = document.getElementById("decisionWrap");
    const noBtn = document.getElementById("noBtn");

    // Move "No" away from pointer with a small, fast hop
    const step = 120;     // hop distance (increase if she still catches it)
    const radius = 90;    // start dodging when pointer is within this many px

    function dodge(ev) {
      const wrapRect = wrap.getBoundingClientRect();
      const btnRect  = noBtn.getBoundingClientRect();
      const px = ev.clientX ?? (ev.touches && ev.touches[0]?.clientX);
      const py = ev.clientY ?? (ev.touches && ev.touches[0]?.clientY);
      if (px == null || py == null) return;

      const cx = btnRect.left + btnRect.width/2;
      const cy = btnRect.top  + btnRect.height/2;
      const dx = cx - px;
      const dy = cy - py;
      const dist = Math.hypot(dx, dy);

      // Only jump if the pointer is getting close
      if (dist > radius) return;

      const nx = dx / (dist || 1);
      const ny = dy / (dist || 1);

      // Proposed new center
      let targetCx = cx + nx * step;
      let targetCy = cy + ny * step;

      // Clamp inside wrap bounds
      const minCx = wrapRect.left + btnRect.width/2;
      const maxCx = wrapRect.right - btnRect.width/2;
      const minCy = wrapRect.top  + btnRect.height/2;
      const maxCy = wrapRect.bottom - btnRect.height/2;

      targetCx = Math.min(Math.max(targetCx, minCx), maxCx);
      targetCy = Math.min(Math.max(targetCy, minCy), maxCy);

      // Convert to wrap-local (top/left are the button center)
      noBtn.style.left = `${targetCx - wrapRect.left}px`;
      noBtn.style.top  = `${targetCy - wrapRect.top}px`;
      noBtn.style.transform = "translate(-50%, -50%)";
    }

    // Make it react as soon as the pointer is near
    wrap.addEventListener("mousemove", dodge);
    noBtn.addEventListener("mouseenter", dodge);
    noBtn.addEventListener("mousemove", dodge);
    noBtn.addEventListener("touchstart", (e) => { e.preventDefault(); dodge(e); }, { passive: false });

  } else {
    failScreen();
  }
}

function yes(){
  app.innerHTML = `<h2>üíñ SHE SAID YES (QUE REM√àDIO N√ÇO √à) üíñ</h2><p>SE PREPAREEEEE üòç</p>`;
  startConfetti();
}

/* üéâ CONFETTI */
const canvas = document.getElementById("confetti");
const ctx = canvas.getContext("2d");
function sizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
sizeCanvas();
window.addEventListener("resize", sizeCanvas);

let pieces = [];
function startConfetti(){
  pieces.length = 0;
  for(let i = 0; i < 300; i++) pieces.push({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    r: Math.random() * 6 + 4,
    c: `hsl(${Math.random()*360},100%,50%)`,
    s: Math.random() * 4 + 2
  });
  requestAnimationFrame(drawConfetti);
}
function drawConfetti(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  for(const p of pieces){
    ctx.fillStyle = p.c;
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
    ctx.fill();
    p.y += p.s;
    if(p.y > canvas.height) p.y = -10;
  }
  requestAnimationFrame(drawConfetti);
}

renderQuestion();
</script>

</body>
</html>
