<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Valentine Quiz ğŸ’</title>

<style>
  body {
    margin: 0;
    height: 100vh;
    font-family: "Segoe UI", sans-serif;

    /* ğŸŒ· Tulips field background */
    background-image: url("https://images.unsplash.com/photo-1557929036-44a5d490d527?auto=format&fit=crop&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&ixlib=rb-4.1.0&q=80&w=3024");
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;

    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }

  /* Fun title above the quiz box */
  .quiz-title {
    text-align: center;
    margin-bottom: 20px;
  }
  .quiz-title h1 {
    font-size: 48px;
    color: #ff4d6d;
    text-shadow: 2px 2px 4px #fff;
    margin: 0;
  }
  .quiz-title p {
    font-size: 20px;
    color: #fff;
    text-shadow: 1px 1px 2px #000;
    margin: 5px 0 0 0;
  }

  /* Quiz card */
  .card {
    background: rgba(255, 255, 255, 0.97);
    width: 90%;
    max-width: 800px;
    min-height: 600px;
    padding: 60px 50px;
    border-radius: 35px;
    text-align: center;
    box-shadow: 0 30px 60px rgba(0,0,0,0.35);
    display: flex;
    flex-direction: column;
    justify-content: center;
    position: relative; /* allow absolute children if needed */
    overflow: hidden;   /* keep runaway children inside */
  }

  h2 { margin-top: 0; font-size: 32px; }
  h3 { font-size: 24px; margin-top: 30px; }
  .counter { font-weight: bold; font-size: 22px; margin-bottom: 25px; }
  .feedback { font-size: 24px; margin: 25px 0; min-height: 28px; }

  /* Regular buttons */
  button {
    margin: 15px;
    padding: 16px 35px;
    border-radius: 35px;
    border: none;
    font-size: 20px;
    cursor: pointer;
    background: #ff4d6d;
    color: white;
    transition: transform 0.2s, background 0.2s;
  }
  button:hover { background: #ff1e4d; transform: scale(1.05); }

  /* Container for Yes/No so No can run around inside it */
  .decision-wrap {
    position: relative;
    height: 160px;      /* space for the no button to dodge */
    margin-top: 18px;
  }

  /* Yes button remains normal, but we place it statically */
  #yesBtn {
    position: relative;
    z-index: 1;
  }

  /* Properly small, dodgeable "No" button */
  #noBtn {
    position: absolute;       /* can move around */
    left: 50%;                /* start centered */
    top: 50%;
    transform: translate(-50%, -50%);
    padding: 8px 14px;        /* smaller! */
    font-size: 14px;
    min-width: 72px;
    height: 36px;
    z-index: 2;

    /* Override global hover zoom so it doesn't become huge */
    transition: left 0.08s linear, top 0.08s linear, background 0.2s;
  }
  /* Disable the scale-up on hover for #noBtn */
  #noBtn:hover { transform: translate(-50%, -50%); }

  canvas { position: fixed; inset: 0; pointer-events: none; }
</style>
</head>

<body>
  <!-- Fun Title -->
  <div class="quiz-title">
    <h1>ğŸ’˜ The Ultimate Valentine Quiz! ğŸ’</h1>
    <p>Can you earn enough kisses to be my Valentine?</p>
  </div>

  <!-- Quiz Card -->
  <div class="card" id="app"></div>
  <canvas id="confetti"></canvas>

<script>
const questions = [
  { q: "Where did we first meet?", a: ["At work", "At a party", "Online", "By accident"], c: 0 },
  { q: "Whatâ€™s my favorite food?", a: ["Pizza", "Sushi", "Pasta", "Burgers"], c: 1 },
  { q: "What do I love doing most?", a: ["Sleeping", "Traveling", "Gaming", "Cooking"], c: 1 },
  { q: "Who is the cutest person alive?", a: ["Me", "You", "Both", "Obviously you"], c: 3 }
];

let index = 0, correct = 0, wrong = 0;
const app = document.getElementById("app");

function renderQuestion(feedback = "") {
  const q = questions[index];
  app.innerHTML = `
    <div class="counter">${correct}/${questions.length} correct</div>
    <h2>${q.q}</h2>
    ${q.a.map((ans,i)=>`<button onclick="answer(${i})">${ans}</button>`).join("")}
    <div class="feedback">${feedback}</div>
  `;
}

function answer(i) {
  const isCorrect = i === questions[index].c;
  if (isCorrect) correct++; else wrong++;
  renderQuestion(isCorrect ? "âœ… Correct!" : "âŒ FOCUS WOMAN ğŸ˜¤");
  setTimeout(() => {
    if (wrong >= 2) failScreen();
    else { index++; if (index < questions.length) renderQuestion(); else resultScreen(); }
  }, 900);
}

function failScreen() {
  app.innerHTML = `
    <h2>ğŸ˜” Oops...</h2>
    <p>You just lost a bunch of kisses ğŸ’‹ğŸ’‹ğŸ’‹</p>
    <p>Please try again</p>
    <button onclick="restart()">Start Over</button>
  `;
}

function restart() { index = 0; correct = 0; wrong = 0; renderQuestion(); }

function resultScreen() {
  if (correct >= 3){
    app.innerHTML = `
      <h2>ğŸ‰ You won!</h2>
      <p>${correct}/4 correct ğŸ’–</p>
      <h3>Will you be my Valentine?</h3>

      <div class="decision-wrap" id="decisionWrap">
        <button id="yesBtn" onclick="yes()">Yes ğŸ’˜</button>
        <button id="noBtn" type="button">No ğŸ’”</button>
      </div>
    `;

    const wrap = document.getElementById("decisionWrap");
    const noBtn = document.getElementById("noBtn");

    // Make the No button dodge on hover and as the mouse approaches
    const moveNo = (ev) => {
      // Bounds of the container
      const wrapRect = wrap.getBoundingClientRect();
      const btnRect = noBtn.getBoundingClientRect();

      // Target: either random or away from cursor
      let targetX, targetY;

      if (ev && ev.clientX != null) {
        // Vector away from the pointer
        const dx = btnRect.x + btnRect.width/2 - ev.clientX;
        const dy = btnRect.y + btnRect.height/2 - ev.clientY;
        const mag = Math.max(Math.hypot(dx, dy), 1);
        const step = 120; // how far to jump away each time
        targetX = btnRect.left + (dx / mag) * step;
        targetY = btnRect.top  + (dy / mag) * step;
      } else {
        // Fallback random move
        targetX = wrapRect.left + Math.random() * (wrapRect.width - btnRect.width);
        targetY = wrapRect.top  + Math.random() * (wrapRect.height - btnRect.height);
      }

      // Clamp within wrap
      const minX = wrapRect.left;
      const minY = wrapRect.top;
      const maxX = wrapRect.right - btnRect.width;
      const maxY = wrapRect.bottom - btnRect.height;

      targetX = Math.min(Math.max(targetX, minX), maxX);
      targetY = Math.min(Math.max(targetY, minY), maxY);

      // Convert to wrap-local coordinates
      const left = targetX - wrapRect.left;
      const top  = targetY - wrapRect.top;

      noBtn.style.left = `${left + btnRect.width/2}px`;
      noBtn.style.top  = `${top + btnRect.height/2}px`;
      noBtn.style.transform = "translate(-50%, -50%)";
    };

    // Interactions that trigger the dodge
    noBtn.addEventListener("mouseenter", moveNo);
    noBtn.addEventListener("mousemove", moveNo);
    // If she taps it on mobile, it still runs ğŸ˜ˆ
    noBtn.addEventListener("touchstart", (e) => {
      e.preventDefault();
      moveNo(e.touches[0]);
    }, { passive: false });

  } else {
    failScreen();
  }
}

function yes(){
  app.innerHTML = `<h2>ğŸ’– SHE SAID YES ğŸ’–</h2><p>Best Valentine ever ğŸ˜</p>`;
  startConfetti();
}

/* ğŸ‰ CONFETTI */
const canvas = document.getElementById("confetti");
const ctx = canvas.getContext("2d");
function sizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
sizeCanvas();
window.addEventListener("resize", sizeCanvas);

let pieces = [];
function startConfetti(){
  pieces.length = 0;
  for(let i = 0; i < 300; i++) pieces.push({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    r: Math.random() * 6 + 4,
    c: `hsl(${Math.random()*360},100%,50%)`,
    s: Math.random() * 4 + 2
  });
  requestAnimationFrame(drawConfetti);
}
function drawConfetti(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  for(const p of pieces){
    ctx.fillStyle = p.c;
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
    ctx.fill();
    p.y += p.s;
    if(p.y > canvas.height) p.y = -10;
  }
  requestAnimationFrame(drawConfetti);
}

renderQuestion();
</script>

</body>
</html>
